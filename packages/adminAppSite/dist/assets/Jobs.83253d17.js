import{n as P,j as c,aF as le,R as L,q as C,aG as de,aH as R,aI as $,aJ as fe,aK as D,aL as b,r as O,aM as ue,aN as he,aO as me,m as ge,aP as W,s as B,aQ as be,f as pe,t as ye,h as U,aR as z,aS as K,aB as k,a as Y,aT as G,aU as Se,az as Fe,aV as Ne,aW as Oe,aX as Ce,u as Ie,aY as Te,aZ as Ae,a_ as _e,a$ as Me,b0 as we,b1 as Ee,b2 as Pe}from"./index.7dbc0443.js";import{g as De,P as Q,a as je,b as Re,c as $e}from"./PendingReviewChip.5acf046c.js";import{J as X}from"./JobStatusChip.517f8023.js";import{F as Z}from"./FullNameField.cece0c7a.js";import{S as x,a as j,g as ee}from"./providerHelpers.5b5f7e8f.js";import{c as re,f as te}from"./timeHelpers.676cc127.js";const Je=({kind:r,setQueryParams:o})=>{const{open:s,closed:u,unpaid:m}=P(De);return c(le,{hasCreate:!0,options:{label:"Jobs",singular:"Job"},basePath:L.JOBS,children:C(de,{value:r,onChange:(g,p)=>o({kind:p,page:"1"}),children:[c(R,{label:c($,{text:"Open",total:s}),value:E.Open}),c(R,{label:c($,{text:"Closed",total:u}),value:E.Closed}),c(R,{label:c($,{text:"Unpaid",total:m,isTotalBadgeRed:!0}),value:E.Unpaid})]})})},Le=Je,Ue=[{id:"companyName",label:"Company"},{id:"dispatcherName",label:"Dispatcher"},{id:"driverName",label:"Driver"},{id:"status",label:"Status"},{id:"rating",label:"Rating"},{id:"providerName",label:"Provider"},{id:"jobLocation",label:"Location"},{id:"durationInSeconds",label:"Duration",align:"right"},{id:"priceInDollars",label:"Price",align:"right"},{id:"createdAt",label:"Created",align:"right"},{id:"jobNumber",label:"Job Number",align:"right"}],Ve=()=>c(fe,{children:c(D,{children:Ue.map((r,o)=>c(b,{align:r.align,children:r.label},r.label))})}),ve=Ve;function ae(r){return r?`${r.firstname||""} ${r.lastname||""}`:""}function ne(r){return r?`${r.firstname||""} ${r.lastname||""}`:""}var V={},We=he.exports,He=me.exports;Object.defineProperty(V,"__esModule",{value:!0});var se=V.default=void 0,qe=He(O.exports),Be=We(ue()),ze=(0,Be.default)(qe.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"}),"MonetizationOn");se=V.default=ze;const ie=r=>{const o=Ke(),s=r.status===W.COMPLETED||r.status===W.COMPLETED_PENDING_REVIEW;return C(B,{className:o.balance,children:[s&&r.isUnpaid&&c(se,{}),be(r.price||0)]})},Ke=ge(()=>({balance:{display:"flex",alignItems:"center",fontWeight:pe.weight.bold,justifyContent:"flex-end","& svg":{color:ye.palette.error.main,height:18}}})),ke=({jobs:r})=>{const o=U();return c(z,{children:r.map(s=>{var u,m,g,p,y;return C(D,{className:"table-row",onClick:()=>o.push(`${L.JOBS}/${s.id}`),children:[c(b,{children:(u=s==null?void 0:s.company)==null?void 0:u.name}),c(b,{children:ae(s.dispatcher)}),c(b,{children:ne((p=(g=(m=s.jobVehicle)==null?void 0:m.vehicle)==null?void 0:g.vehicleDriver)==null?void 0:p.driver)}),C(b,{children:[c(X,{status:s.status_id}),s.is_pending_review&&K.includes(s.status_id)&&c(Q,{})]}),c(b,{children:s.rating?c(x,{label:s.rating,endIcon:c(k,{style:{height:"11px",width:"12px",color:Y.texasRose}})}):null}),c(b,{children:j(s==null?void 0:s.provider)&&c(Z,{providerFullName:j(s==null?void 0:s.provider),providerStatus:ee(s.is_online,s.is_onjob)})}),c(b,{children:`${s.location_city}, ${s.location_state}`}),c(b,{align:"right",children:re(((y=s.jobRequest)==null?void 0:y.duration)*60)}),c(b,{children:c(ie,{status:s.status_id,isUnpaid:s.total_cost-s.payment_sum>0,balance:s.total_cost-s.payment_sum,price:s.total_cost})}),c(b,{align:"right",children:te(new Date(s.created_at))}),c(b,{align:"right",children:G(s.id)})]},s.id)})})},Ye=ke,Ge="Alabama",Qe="Alaska",Xe="American Samoa",Ze="Arizona",xe="Arkansas",er="California",rr="Colorado",tr="Connecticut",ar="Delaware",nr="District Of Columbia",sr="Federated States Of Micronesia",ir="Florida",cr="Georgia",or="Guam",lr="Hawaii",dr="Idaho",fr="Illinois",ur="Indiana",hr="Iowa",mr="Kansas",gr="Kentucky",br="Louisiana",pr="Maine",yr="Marshall Islands",Sr="Maryland",Fr="Massachusetts",Nr="Michigan",Or="Minnesota",Cr="Mississippi",Ir="Missouri",Tr="Montana",Ar="Nebraska",_r="Nevada",Mr="New Hampshire",wr="New Jersey",Er="New Mexico",Pr="New York",Dr="North Carolina",jr="North Dakota",Rr="Northern Mariana Islands",$r="Ohio",Jr="Oklahoma",Lr="Oregon",Ur="Palau",Vr="Pennsylvania",vr="Puerto Rico",Wr="Rhode Island",Hr="South Carolina",qr="South Dakota",Br="Tennessee",zr="Texas",Kr="Utah",kr="Vermont",Yr="Virgin Islands",Gr="Virginia",Qr="Washington",Xr="West Virginia",Zr="Wisconsin",xr="Wyoming",et={AL:Ge,AK:Qe,AS:Xe,AZ:Ze,AR:xe,CA:er,CO:rr,CT:tr,DE:ar,DC:nr,FM:sr,FL:ir,GA:cr,GU:or,HI:lr,ID:dr,IL:fr,IN:ur,IA:hr,KS:mr,KY:gr,LA:br,ME:pr,MH:yr,MD:Sr,MA:Fr,MI:Nr,MN:Or,MS:Cr,MO:Ir,MT:Tr,NE:Ar,NV:_r,NH:Mr,NJ:wr,NM:Er,NY:Pr,NC:Dr,ND:jr,MP:Rr,OH:$r,OK:Jr,OR:Lr,PW:Ur,PA:Vr,PR:vr,RI:Wr,SC:Hr,SD:qr,TN:Br,TX:zr,UT:Kr,VT:kr,VI:Yr,VA:Gr,WA:Qr,WV:Xr,WI:Zr,WY:xr},rt=Se(()=>({stateRow:{backgroundColor:"#f2f2f2"},cellState:{fontWeight:800}})),tt=({jobs:r})=>{var g,p;const o=U(),{stateRow:s,cellState:u}=rt(),m=O.exports.useMemo(()=>r!=null&&r.length?r.reduce((y,N)=>{var S;return y[N.location_state]=((S=y[N.location_state])!=null?S:[]).concat(N),y},{}):{},[r]);return c(z,{children:(p=(g=Object.keys(m))==null?void 0:g.sort((y,N)=>y.localeCompare(N)))==null?void 0:p.map((y,N)=>{var S,f;return C(O.exports.Fragment,{children:[c(D,{className:Fe("table-row",s),children:c(b,{colSpan:11,className:u,children:String((S=et[y])!=null?S:"Unkown").toUpperCase()})}),(f=m[y])==null?void 0:f.map(l=>{var I,T,w,A,_;return C(D,{className:"table-row",onClick:()=>o.push(`${L.JOBS}/${l.id}`),children:[c(b,{children:(I=l==null?void 0:l.company)==null?void 0:I.name}),c(b,{children:ae(l.dispatcher)}),c(b,{children:ne((A=(w=(T=l.jobVehicle)==null?void 0:T.vehicle)==null?void 0:w.vehicleDriver)==null?void 0:A.driver)}),C(b,{children:[c(X,{status:l.status_id}),l.is_pending_review&&K.includes(l.status_id)&&c(Q,{})]}),c(b,{children:l.rating?c(x,{label:l.rating,endIcon:c(k,{style:{height:"11px",width:"12px",color:Y.texasRose}})}):null}),c(b,{children:j(l==null?void 0:l.provider)&&c(Z,{providerFullName:j(l==null?void 0:l.provider),providerStatus:ee(l.is_online,l.is_onjob)})}),c(b,{children:`${l.location_city}, ${l.location_state}`}),c(b,{align:"right",children:re(((_=l.jobRequest)==null?void 0:_.duration)*60)}),c(b,{children:c(ie,{status:l.status,isUnpaid:l.total_cost-l.payment_sum>0,balance:l.total_cost-l.payment_sum,price:l.total_cost})}),c(b,{align:"right",children:te(new Date(l.created_at))}),c(b,{align:"right",children:G(l.id)})]},l.id)})]},`${y}_${N}`)})})},at=tt,nt=({setQueryParams:r,page:o,rowsPerPage:s})=>{const u=P(je);return c(Ne,{count:u,paginationSettings:{page:o,size:s},onPaginationSettingsChange:m=>r({page:(m.page+1).toString(),rowsPerPage:m.size})})},st=nt;var M={},it=r=>encodeURIComponent(r).replace(/[!'()*]/g,o=>`%${o.charCodeAt(0).toString(16).toUpperCase()}`),ce="%[a-f0-9]{2}",H=new RegExp("("+ce+")|([^%]+?)","gi"),q=new RegExp("("+ce+")+","gi");function J(r,o){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;o=o||1;var s=r.slice(0,o),u=r.slice(o);return Array.prototype.concat.call([],J(s),J(u))}function ct(r){try{return decodeURIComponent(r)}catch{for(var o=r.match(H)||[],s=1;s<o.length;s++)r=J(o,s).join(""),o=r.match(H)||[];return r}}function ot(r){for(var o={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},s=q.exec(r);s;){try{o[s[0]]=decodeURIComponent(s[0])}catch{var u=ct(s[0]);u!==s[0]&&(o[s[0]]=u)}s=q.exec(r)}o["%C2"]="\uFFFD";for(var m=Object.keys(o),g=0;g<m.length;g++){var p=m[g];r=r.replace(new RegExp(p,"g"),o[p])}return r}var lt=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return ot(r)}},dt=(r,o)=>{if(!(typeof r=="string"&&typeof o=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(o==="")return[r];const s=r.indexOf(o);return s===-1?[r]:[r.slice(0,s),r.slice(s+o.length)]},ft=function(r,o){for(var s={},u=Object.keys(r),m=Array.isArray(o),g=0;g<u.length;g++){var p=u[g],y=r[p];(m?o.indexOf(p)!==-1:o(p,y,r))&&(s[p]=y)}return s};(function(r){const o=it,s=lt,u=dt,m=ft,g=e=>e==null,p=Symbol("encodeFragmentIdentifier");function y(e){switch(e.arrayFormat){case"index":return t=>(n,a)=>{const i=n.length;return a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:a===null?[...n,[f(t,e),"[",i,"]"].join("")]:[...n,[f(t,e),"[",f(i,e),"]=",f(a,e)].join("")]};case"bracket":return t=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:a===null?[...n,[f(t,e),"[]"].join("")]:[...n,[f(t,e),"[]=",f(a,e)].join("")];case"colon-list-separator":return t=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:a===null?[...n,[f(t,e),":list="].join("")]:[...n,[f(t,e),":list=",f(a,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(a,i)=>i===void 0||e.skipNull&&i===null||e.skipEmptyString&&i===""?a:(i=i===null?"":i,a.length===0?[[f(n,e),t,f(i,e)].join("")]:[[a,f(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:a===null?[...n,f(t,e)]:[...n,[f(t,e),"=",f(a,e)].join("")]}}function N(e){let t;switch(e.arrayFormat){case"index":return(n,a,i)=>{if(t=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!t){i[n]=a;return}i[n]===void 0&&(i[n]={}),i[n][t[1]]=a};case"bracket":return(n,a,i)=>{if(t=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!t){i[n]=a;return}if(i[n]===void 0){i[n]=[a];return}i[n]=[].concat(i[n],a)};case"colon-list-separator":return(n,a,i)=>{if(t=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!t){i[n]=a;return}if(i[n]===void 0){i[n]=[a];return}i[n]=[].concat(i[n],a)};case"comma":case"separator":return(n,a,i)=>{const h=typeof a=="string"&&a.includes(e.arrayFormatSeparator),d=typeof a=="string"&&!h&&l(a,e).includes(e.arrayFormatSeparator);a=d?l(a,e):a;const F=h||d?a.split(e.arrayFormatSeparator).map(oe=>l(oe,e)):a===null?a:l(a,e);i[n]=F};case"bracket-separator":return(n,a,i)=>{const h=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!h){i[n]=a&&l(a,e);return}const d=a===null?[]:a.split(e.arrayFormatSeparator).map(F=>l(F,e));if(i[n]===void 0){i[n]=d;return}i[n]=[].concat(i[n],d)};default:return(n,a,i)=>{if(i[n]===void 0){i[n]=a;return}i[n]=[].concat(i[n],a)}}}function S(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function l(e,t){return t.decode?s(e):e}function I(e){return Array.isArray(e)?e.sort():typeof e=="object"?I(Object.keys(e)).sort((t,n)=>Number(t)-Number(n)).map(t=>e[t]):e}function T(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function w(e){let t="";const n=e.indexOf("#");return n!==-1&&(t=e.slice(n)),t}function A(e){e=T(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function _(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function v(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),S(t.arrayFormatSeparator);const n=N(t),a=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return a;for(const i of e.split("&")){if(i==="")continue;let[h,d]=u(t.decode?i.replace(/\+/g," "):i,"=");d=d===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?d:l(d,t),n(l(h,t),d,a)}for(const i of Object.keys(a)){const h=a[i];if(typeof h=="object"&&h!==null)for(const d of Object.keys(h))h[d]=_(h[d],t);else a[i]=_(h,t)}return t.sort===!1?a:(t.sort===!0?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce((i,h)=>{const d=a[h];return Boolean(d)&&typeof d=="object"&&!Array.isArray(d)?i[h]=I(d):i[h]=d,i},Object.create(null))}r.extract=A,r.parse=v,r.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),S(t.arrayFormatSeparator);const n=d=>t.skipNull&&g(e[d])||t.skipEmptyString&&e[d]==="",a=y(t),i={};for(const d of Object.keys(e))n(d)||(i[d]=e[d]);const h=Object.keys(i);return t.sort!==!1&&h.sort(t.sort),h.map(d=>{const F=e[d];return F===void 0?"":F===null?f(d,t):Array.isArray(F)?F.length===0&&t.arrayFormat==="bracket-separator"?f(d,t)+"[]":F.reduce(a(d),[]).join("&"):f(d,t)+"="+f(F,t)}).filter(d=>d.length>0).join("&")},r.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,a]=u(e,"#");return Object.assign({url:n.split("?")[0]||"",query:v(A(e),t)},t&&t.parseFragmentIdentifier&&a?{fragmentIdentifier:l(a,t)}:{})},r.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[p]:!0},t);const n=T(e.url).split("?")[0]||"",a=r.extract(e.url),i=r.parse(a,{sort:!1}),h=Object.assign(i,e.query);let d=r.stringify(h,t);d&&(d=`?${d}`);let F=w(e.url);return e.fragmentIdentifier&&(F=`#${t[p]?f(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${n}${d}${F}`},r.pick=(e,t,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[p]:!1},n);const{url:a,query:i,fragmentIdentifier:h}=r.parseUrl(e,n);return r.stringifyUrl({url:a,query:m(i,t),fragmentIdentifier:h},n)},r.exclude=(e,t,n)=>{const a=Array.isArray(t)?i=>!t.includes(i):(i,h)=>!t(i,h);return r.pick(e,a,n)}})(M);function ut(r){const o=Oe(),s=U();Ce.useEffect(()=>{const m=M.parse(o.search),g=M.stringify({...r,...m});s.push({search:"?"+g})},[]);const u=o.search?M.parse(o.search):r;return{search:o.search,queryParams:u,setQueryParams:m=>{const g=M.stringify({...u,...m});s.push({search:"?"+g})}}}var E=(r=>(r.Open="opened",r.Closed="closed",r.Unpaid="unpaid",r))(E||{});function St(){const r=Ie(),[o,s]=O.exports.useState(!1),[u,m]=O.exports.useState(null),g=P(Re),p=P($e),{queryParams:y,setQueryParams:N}=ut({kind:"opened",page:"1",rowsPerPage:Te.TWENTY_FIVE}),S=y.kind,f=+y.page-1,l=+y.rowsPerPage;return O.exports.useEffect(()=>{r(Ae({page:f,size:l,kind:S,sort:"id",order:"desc",joins:"provider,company,dispatcher,jobRequest,driver"}))},[r,f,l,S]),O.exports.useEffect(()=>{const I=setInterval(()=>{s(!0)},1e5);m(I)},[]),O.exports.useEffect(()=>{o&&!p&&(r(_e({page:f,size:l,kind:S,sort:"id",order:"desc",joins:"provider,company,dispatcher,jobRequest,driver"})),s(!1))},[o,r,f,l,S,p]),O.exports.useEffect(()=>()=>{u&&clearTimeout(u)},[u]),C(B,{display:"flex",flexDirection:"column",minHeight:"100%",children:[c(Le,{kind:S,setQueryParams:N}),c(Me,{children:p?c(we,{}):c(Ee,{children:C(Pe,{className:"table",children:[c(ve,{}),S==="opened"?c(at,{jobs:g}):c(Ye,{jobs:g})]})})}),g.length>0&&c(st,{setQueryParams:N,page:f,rowsPerPage:l})]})}export{E as JobKind,St as default};
